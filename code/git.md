# Git style guide

## General guidance

Avoid committing straight to master, use branches and Pull Requests instead.
Committing to master should only be done if you have really good reason as it
hides the change from everyone else. Opening a Pull Request and merging it
yourself is always an option.

Rebasing is expected on feature branches, but we don't rebase master unless we
have extremely good reason and we've talked about it as a team.

## Commit messages

Writing good commit messages is important. Not just for yourself, but for other
developers on your project. This includes:

* new (or recently absent) developers who want to get up to speed
* any future developers (including yourself) who want to see why a change was
  made

### Content

A good commit message briefly summarises the "what" for scanning purposes, but
also includes the "why". If the "what" in the message isn't enough, the diff is
there as a fallback. This isn't true for the "why" of a change - this can be
much harder or impossible to reconstruct, but is often really important.

#### Example

Instead of:

```
Set cache headers
```

prefer:

```
Set cache headers

IE 6 was doing foo, so we need to do X.
See http://example.com/why-is-this-broken for more details.
```

#### Links to issue trackers

A link to a ticket in an issue tracker isn't an alternative to writing a commit
message. Write a good and complete commit message and, if you want to, link to
the issue tracker as an added extra.

While a link can add some extra context for people reviewing a pull request,
there's no guarantee that the link will be accessible to that person nor that it
will continue to work at all in the future.

### Structure

Commit messages should start with a one-line summary no longer than 50
characters. Various Git tools (including GitHub) use this as the commit
summary, so you should format it like an email subject, with a leading capital
and no full stop. The Git convention is to write these in the present tense.

You should leave a blank line before the rest of the commit message, which you
should wrap at around 72 characters: this makes it easier to view commit
messages in a terminal.


#### Example

Taken from [Tim Popeâ€™s guidelines](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html).

> Capitalized, short (50 chars or less) summary

> More detailed explanatory text, if necessary.  Wrap it to about 72
characters or so.  In some contexts, the first line is treated as the
subject of an email and the rest of the text as the body.  The blank
line separating the summary from the body is critical (unless you omit
the body entirely); tools like rebase can get confused if you run the
two together.

> Write your commit message in the present tense: "Fix bug" and not "Fixed
bug."  This convention matches up with commit messages generated by
commands like git merge and git revert.

> Further paragraphs come after blank lines.

> - Bullet points are okay, too
> - Typically a hyphen or asterisk is used for the bullet, preceded by a
  single space, with blank lines in between, but conventions vary here
> - Use a hanging indent

#### Configuring your editor

If you use vim - which is the default command line editor for commit messages -
you can set it to syntax highlight your commit messages to see if they meet this
format by adding a `.vimrc` file to your home directory:

    syntax on
    set ruler

## Further reading

* [5 useful tips for a better commit message](http://robots.thoughtbot.com/5-useful-tips-for-a-better-commit-message)
* [Every line of code is always documented](* [Every line of code is always documented](http://mislav.net/2014/02/hidden-documentation/)
